{"version":3,"sources":["scripts/main.js"],"names":["mainTable","document","querySelector","thead","tbody","countClick","prevClick","takeNumber","str","replace","addEventListener","e","reverse","tr","querySelectorAll","target","cellIndex","sorted","sort","tdA","tdB","prev","children","innerText","curr","isNaN","localeCompare","append","active","parentElement","setAttribute","removeAttribute","input","createElement","selectedItem","closest","innerHTML","classList","add","focus","enter","keyCode","value","insertAdjacentHTML","form","button","formElements","elements","addNewPerson","newName","newPosition","newOffice","newAge","newSalary","toString","validationForm","nameInput","positionInput","officeInput","ageInput","salaryInput","length","popNotification","title","description","type","notice","body","setTimeout","remove","preventDefault"],"mappings":"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","file":"main.49eed267.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst mainTable = document.querySelector('table');\nconst thead = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\nlet countClick = 0;\nlet prevClick = 0;\n\nfunction takeNumber(str) {\n  return +str.replace(/[$,]/g, '');\n}\n\nthead.addEventListener('click', (e) => {\n  let reverse = false;\n\n  const tr = tbody.querySelectorAll('tr');\n\n  if (e.target.cellIndex !== prevClick) {\n    countClick = 0;\n  }\n\n  if (countClick === 0) {\n    countClick++;\n  } else {\n    reverse = true;\n    countClick = 0;\n  }\n\n  const sorted = [...tr].sort((tdA, tdB) => {\n    const prev = tdA.children[e.target.cellIndex].innerText;\n    const curr = tdB.children[e.target.cellIndex].innerText;\n\n    if (!reverse) {\n      if (!isNaN(takeNumber(prev))) {\n        return takeNumber(prev) - takeNumber(curr);\n      } else {\n        return prev.localeCompare(curr);\n      }\n    }\n\n    if (reverse) {\n      if (!isNaN(takeNumber(curr))) {\n        return takeNumber(curr) - takeNumber(prev);\n      } else {\n        return curr.localeCompare(prev);\n      }\n    }\n  });\n\n  prevClick = e.target.cellIndex;\n\n  tbody.append(...sorted);\n});\n\ntbody.addEventListener('click', (e) => {\n  const active = document.querySelector('.active');\n\n  e.target.parentElement.setAttribute('class', 'active');\n\n  if (active) {\n    active.removeAttribute('class');\n  }\n});\n\ntbody.addEventListener('dblclick', (e) => {\n  const input = document.createElement('input');\n  const selectedItem = e.target.closest('td');\n  const innerText = selectedItem.innerHTML;\n\n  input.classList.add('cell-input');\n  input.setAttribute('size', '1');\n  selectedItem.innerHTML = '';\n  selectedItem.append(input);\n\n  input.focus();\n\n  const keyEnter = (enter) => {\n    if (enter.keyCode === 13) {\n      if (input.value) {\n        selectedItem.innerHTML = input.value;\n      } else {\n        selectedItem.innerHTML = innerText;\n      }\n    }\n  };\n\n  const mouseBlur = () => {\n    if (input.value) {\n      selectedItem.innerHTML = input.value;\n    } else {\n      selectedItem.innerHTML = innerText;\n    }\n  };\n\n  input.addEventListener('keypress', keyEnter, true);\n  input.addEventListener('blur', mouseBlur, false);\n});\n\nmainTable.insertAdjacentHTML(\n  'afterend',\n  `\n  <form class=\"new-employee-form\" method=\"post\">\n    <label>\n      Name: <input data-qa=\"name\" name=\"name\" type=\"text\">\n    </label>\n    <label>\n      Position: <input data-qa=\"position\" name=\"position\" type=\"text\">\n    </label>\n    <label>\n      Office:\n      <select data-qa=\"office\" name=\"office\">\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\"></option>\n      </select>\n    </label>\n    <label>\n      Age: <input data-qa=\"age\" name=\"age\" type=\"number\">\n    </label>\n    <label>\n      Salary: <input data-qa=\"salary\" name=\"salary\" type=\"number\">\n    </label>\n    <button name=\"button\" id=\"submit\">Save to table</button>\n  </form>\n  `\n);\n\nconst form = document.querySelector('.new-employee-form');\nconst button = document.querySelector('#submit');\nconst formElements = form.elements;\n\nfunction addNewPerson(\n  newName,\n  newPosition,\n  newOffice,\n  newAge,\n  newSalary,\n) {\n  tbody.insertAdjacentHTML('beforeend',\n    `\n  <tr>\n    <td>${newName}</td>\n    <td>${newPosition}</td>\n    <td>${newOffice}</td>\n    <td>${newAge}</td>\n    <td>$${newSalary.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}</td>\n  </tr>\n`\n  );\n}\n\nfunction validationForm() {\n  const nameInput = formElements['name'].value;\n  const positionInput = formElements['position'].value;\n  const officeInput = formElements['office'].value;\n  const ageInput = formElements['age'].value;\n  const salaryInput = formElements['salary'].value;\n\n  if (nameInput.length < 4) {\n    return popNotification('Name ERROR',\n      'Please, input name more than 4 charachters', 'error');\n  }\n\n  if (!positionInput) {\n    return popNotification('Position ERROR',\n      'Enter your position', 'error');\n  }\n\n  if (!ageInput || ageInput < 18 || ageInput > 90) {\n    return popNotification('Age ERROR',\n      'Sorry, but the age must be at least '\n      + '18 years old and no more then 90', 'error');\n  }\n\n  if (!salaryInput) {\n    return popNotification('Salary ERROR',\n      'I`m sure, you have a salary', 'error');\n  }\n\n  popNotification('Employer was added',\n    'New employer was added to the table', 'success');\n\n  addNewPerson(\n    nameInput,\n    positionInput,\n    officeInput,\n    ageInput,\n    salaryInput\n  );\n\n  formElements['name'].value = '';\n  formElements['position'].value = '';\n  formElements['age'].value = '';\n  formElements['salary'].value = '';\n}\n\nbutton.addEventListener('click', (e) => {\n  e.preventDefault();\n  validationForm();\n});\n\nfunction popNotification(title, description, type) {\n  const notice = `\n    <div data-qa='notification' class='notification ${type}'>\n      <h1>${title}</h1>\n      <p>${description}</p>\n    </div>\n  `;\n\n  document.body.insertAdjacentHTML('beforeend', notice);\n\n  setTimeout(() => {\n    document.querySelector(`.${type}`).remove();\n  }, 3000);\n}\n"]}